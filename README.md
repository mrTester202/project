# lessons 8
# Перегрузка операций в С++
Различают три основных вида операторов: унарные, бинарные и n-арные (n>2).

**Унарные операторы** – это операторы, которые для вычислений требуют одного операнда, который может размещаться справа или слева от самого оператора.
```C++
i++
--a
-8
```
**Бинарные операторы** – это операторы, которые для вычисления требуют двух операндов.
```C++
a+b
f1-f2
c%d
x1*x2
```

**n-арные операторы** для вычислений требуют более двух операндов. В языке C++ есть тернарная операция ?:, которая для своей работы требует три операнда. 

Перегрузка оператора означает использование оператора для оперирования объектами классов. Перегрузка оператора – способ объявления и реализации оператора таким образом, что он обрабатывает объекты конкретных классов или выполняет некоторые другие действия. При перегрузке оператора в классе вызывается соответствующая операторная функция (operator function), которая выполняет действия, которые касаются данного класса.
Если оператор «перегружен», то его можно использовать в других методах в обычном для него виде. Например, команды поэлементного суммирования двух массивов a1 и a2:
```C++
// обычно
a1.add(a2);
a3 = add(a1, a2);

// перегрузка оператора +
a1 = a1 + a2;
a3 = a1 + a2;
```
В данном примере оператор ‘+’ считается перегруженным.

Часто задаваемый вопрос: Какими способами можно реализовать операторную функцию для заданного класса? Какие существуют разновидности операторных функций?
Для заданного класса операторную функцию в классе можно реализовать:

    1. внутри класса. В этом случае, операторная функция есть методом класса;
    2. за пределами класса. В этом случае операторная функция объявляется за пределами класса как «дружественная» (с ключевым словом friend). Более подробно о       реализации «дружественных» функций за пределами класса описывается здесь.

Общая форма операторной функции, реализованной в классе, имеет следующий вид:
```C++
return_type ClassName::operator#(arguments_list)
{
    // некоторые операции
    // ...
}
```
где

    1. return_type – тип значения, которое возвращается операторной функцией;
    2. ClassName – имя класса, в котором реализована операторная функция;
    3. operator# – ключевое слово, определяющее операторную функцию в классе. Символ # заменяется оператором языка C++, который перегружается. Например, если перегружается оператор +, то нужно указать operator+;
    4. argument_list – список параметров, которые получает операторная функция. Если перегружается бинарный оператор, то argument_list содержит один аргумент. Если перегружается унарный оператор, то список аргументов пустой.
   
Пример перегрузки унарных и бинарных операторов для класса, который содержит одиночные данные. Операторная функция реализована внутри класса.
Объявляется класс Point, реализующий точку на координатной плоскости. В классе реализованы:

    1. две внутренние переменные x, y, которые есть координатами точки;
    2. два конструктора класса;
    3. методы доступа к внутренним переменным класса GetX(), GetY(), SetX(), SetY();
    4. две операторные функции operator+() и operator-().
```C++
// Класс, который реализует точку на координатной плоскости
// класс содержит две операторные функции
class Point
{
private:
    int x, y; // координаты точки

public:
    // конструкторы класса
    Point()
    {
        x = y = 0;
    }

    Point(int nx, int ny)
    {
        x = nx;
        y = ny;
    }

    // методы доступа к членам класса
    int GetX(void) { return x; }
    int GetY(void) { return y; }
    void SetX(int nx) { x = nx; }
    void Set(int ny) { y = ny; }

    // перегруженный бинарный оператор '+'
    Point operator+(Point pt)
    {
        // p - временный объект, который создается с помощью конструктора без параметров
        Point p;
        p.x = x + pt.x;
        p.y = y + pt.y;
        return p;
    }

    // перегруженный унарный оператор '-'
    Point operator-(void)
    {
        Point p;
        p.x = -x;
        p.y = -y;
        return p;
    }
};
```

Как видно из вышеприведенного кода, операторная функция operator+() получает один параметр. Это значит, что эта функция реализует бинарный оператор ‘+’. Этот параметр соответствует операнду, который размещается в правой части бинарного оператора ‘+’. Операнд, который размещается в левой части оператора ‘+’ передается операторной функции неявно с помощью указателя this данного класса.


ВНИМАНИЕ ЭТО ОЧЕНЬ ВАЖНО!!! Нельзя перегружать следующие операторы:

    :: – расширение области видимости;
    . (точка) – доступ к члену структуры или класса;
    * – доступ по указателю;
    ?: – тернарная операция.

